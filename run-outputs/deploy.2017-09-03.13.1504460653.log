Using /Users/hsutsungchun/ansible-kubeadm/ansible.cfg as config file

PLAY [all] ************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [165.227.74.212]
ok: [165.227.66.123]

TASK [reset : Reset cluster] ******************************************************************************************************************
fatal: [165.227.74.212]: FAILED! => {"changed": true, "cmd": "/usr/bin/kubeadm reset", "delta": "0:00:00.002376", "end": "2017-09-03 17:44:21.356651", "failed": true, "rc": 127, "start": "2017-09-03 17:44:21.354275", "stderr": "/bin/sh: 1: /usr/bin/kubeadm: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/kubeadm: not found"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [165.227.66.123]: FAILED! => {"changed": true, "cmd": "/usr/bin/kubeadm reset", "delta": "0:00:00.002432", "end": "2017-09-03 17:44:21.444671", "failed": true, "rc": 127, "start": "2017-09-03 17:44:21.442239", "stderr": "/bin/sh: 1: /usr/bin/kubeadm: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/kubeadm: not found"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [reset : systemctl stop kubelet] *********************************************************************************************************
changed: [165.227.74.212] => {"changed": true, "cmd": "for i in $(/usr/bin/systemctl list-unit-files --no-legend --no-pager -l | grep --color=never -o *.*.slice | grep kubepod); do echo $i; systemctl stop $i; done", "delta": "0:00:00.007461", "end": "2017-09-03 17:44:22.194122", "rc": 0, "start": "2017-09-03 17:44:22.186661", "stderr": "/bin/sh: 1: /usr/bin/systemctl: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/systemctl: not found"], "stdout": "", "stdout_lines": []}
changed: [165.227.66.123] => {"changed": true, "cmd": "for i in $(/usr/bin/systemctl list-unit-files --no-legend --no-pager -l | grep --color=never -o *.*.slice | grep kubepod); do echo $i; systemctl stop $i; done", "delta": "0:00:00.006126", "end": "2017-09-03 17:44:22.240160", "rc": 0, "start": "2017-09-03 17:44:22.234034", "stderr": "/bin/sh: 1: /usr/bin/systemctl: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/systemctl: not found"], "stdout": "", "stdout_lines": []}

TASK [reset : remove pacakges] ****************************************************************************************************************
ok: [165.227.74.212] => (item=kubelet) => {"changed": false, "item": "kubelet"}
ok: [165.227.66.123] => (item=kubelet) => {"changed": false, "item": "kubelet"}
ok: [165.227.74.212] => (item=kubectl) => {"changed": false, "item": "kubectl"}
ok: [165.227.66.123] => (item=kubectl) => {"changed": false, "item": "kubectl"}
ok: [165.227.74.212] => (item=kubeadm) => {"changed": false, "item": "kubeadm"}
ok: [165.227.66.123] => (item=kubeadm) => {"changed": false, "item": "kubeadm"}
ok: [165.227.74.212] => (item=kubernetes-cni) => {"changed": false, "item": "kubernetes-cni"}
ok: [165.227.66.123] => (item=kubernetes-cni) => {"changed": false, "item": "kubernetes-cni"}

TASK [reset : cni0 IP allocation issue] *******************************************************************************************************
 [WARNING]: Consider using file module with state=absent rather than running rm
fatal: [165.227.74.212]: FAILED! => {"changed": true, "cmd": "rm -rf /var/lib/cni/ /var/lib/kubelet/* /etc/cni/ /run/flannel ; ifconfig cni0 down; ifconfig flannel.1 down;", "delta": "0:00:00.011107", "end": "2017-09-03 17:44:29.224064", "failed": true, "rc": 255, "start": "2017-09-03 17:44:29.212957", "stderr": "cni0: ERROR while getting interface flags: No such device\nflannel.1: ERROR while getting interface flags: No such device", "stderr_lines": ["cni0: ERROR while getting interface flags: No such device", "flannel.1: ERROR while getting interface flags: No such device"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [165.227.66.123]: FAILED! => {"changed": true, "cmd": "rm -rf /var/lib/cni/ /var/lib/kubelet/* /etc/cni/ /run/flannel ; ifconfig cni0 down; ifconfig flannel.1 down;", "delta": "0:00:00.012207", "end": "2017-09-03 17:44:29.432432", "failed": true, "rc": 255, "start": "2017-09-03 17:44:29.420225", "stderr": "cni0: ERROR while getting interface flags: No such device\nflannel.1: ERROR while getting interface flags: No such device", "stderr_lines": ["cni0: ERROR while getting interface flags: No such device", "flannel.1: ERROR while getting interface flags: No such device"], "stdout": "", "stdout_lines": []}
...ignoring

PLAY [all] ************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [165.227.66.123]
ok: [165.227.74.212]

TASK [common : Add apt key] *******************************************************************************************************************
changed: [165.227.74.212] => {"changed": true}
changed: [165.227.66.123] => {"changed": true}

TASK [common : Add kubernetes apt repo] *******************************************************************************************************
changed: [165.227.74.212] => {"changed": true, "repo": "deb http://apt.kubernetes.io/ kubernetes-xenial main", "state": "present"}
changed: [165.227.66.123] => {"changed": true, "repo": "deb http://apt.kubernetes.io/ kubernetes-xenial main", "state": "present"}

TASK [common : Install essential packages] ****************************************************************************************************
changed: [165.227.74.212] => (item=[u'kubelet', u'kubeadm', u'kubectl', u'kubernetes-cni', u'docker.io']) => {"cache_update_time": 1504460687, "cache_updated": true, "changed": true, "item": ["kubelet", "kubeadm", "kubectl", "kubernetes-cni", "docker.io"], "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following package was automatically installed and is no longer required:\n  grub-pc-bin\nUse 'apt autoremove' to remove it.\nThe following additional packages will be installed:\n  bridge-utils cgroupfs-mount containerd ebtables runc socat ubuntu-fan\nSuggested packages:\n  mountall aufs-tools debootstrap docker-doc rinse zfs-fuse | zfsutils\nThe following NEW packages will be installed:\n  bridge-utils cgroupfs-mount containerd docker.io ebtables kubeadm kubectl\n  kubelet kubernetes-cni runc socat ubuntu-fan\n0 upgraded, 12 newly installed, 0 to remove and 17 not upgraded.\nNeed to get 61.8 MB of archives.\nAfter this operation, 417 MB of additional disk space will be used.\nGet:1 http://mirrors.digitalocean.com/ubuntu xenial/main amd64 bridge-utils amd64 1.5-9ubuntu1 [28.6 kB]\nGet:2 http://mirrors.digitalocean.com/ubuntu xenial/universe amd64 cgroupfs-mount all 1.2 [4970 B]\nGet:3 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 runc amd64 1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1 [1479 kB]\nGet:5 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 containerd amd64 0.2.5-0ubuntu1~16.04.1 [4041 kB]\nGet:9 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 docker.io amd64 1.12.6-0ubuntu1~16.04.1 [10.8 MB]\nGet:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.5.1-00 [5560 kB]\nGet:10 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ebtables amd64 2.0.10.4-3.4ubuntu2 [79.4 kB]\nGet:11 http://mirrors.digitalocean.com/ubuntu xenial/universe amd64 socat amd64 1.7.3.1-1 [321 kB]\nGet:12 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-fan all 0.9.2 [30.7 kB]\nGet:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.7.5-00 [19.6 MB]\nGet:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.7.5-00 [10.1 MB]\nGet:8 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.7.5-00 [9782 kB]\nFetched 61.8 MB in 2s (23.3 MB/s)\nSelecting previously unselected package bridge-utils.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 54209 files and directories currently installed.)\r\nPreparing to unpack .../bridge-utils_1.5-9ubuntu1_amd64.deb ...\r\nUnpacking bridge-utils (1.5-9ubuntu1) ...\r\nSelecting previously unselected package cgroupfs-mount.\r\nPreparing to unpack .../cgroupfs-mount_1.2_all.deb ...\r\nUnpacking cgroupfs-mount (1.2) ...\r\nSelecting previously unselected package runc.\r\nPreparing to unpack .../runc_1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package containerd.\r\nPreparing to unpack .../containerd_0.2.5-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking containerd (0.2.5-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package docker.io.\r\nPreparing to unpack .../docker.io_1.12.6-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking docker.io (1.12.6-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package ebtables.\r\nPreparing to unpack .../ebtables_2.0.10.4-3.4ubuntu2_amd64.deb ...\r\nUnpacking ebtables (2.0.10.4-3.4ubuntu2) ...\r\nSelecting previously unselected package kubernetes-cni.\r\nPreparing to unpack .../kubernetes-cni_0.5.1-00_amd64.deb ...\r\nUnpacking kubernetes-cni (0.5.1-00) ...\r\nSelecting previously unselected package socat.\r\nPreparing to unpack .../socat_1.7.3.1-1_amd64.deb ...\r\nUnpacking socat (1.7.3.1-1) ...\r\nSelecting previously unselected package kubelet.\r\nPreparing to unpack .../kubelet_1.7.5-00_amd64.deb ...\r\nUnpacking kubelet (1.7.5-00) ...\r\nSelecting previously unselected package kubectl.\r\nPreparing to unpack .../kubectl_1.7.5-00_amd64.deb ...\r\nUnpacking kubectl (1.7.5-00) ...\r\nSelecting previously unselected package kubeadm.\r\nPreparing to unpack .../kubeadm_1.7.5-00_amd64.deb ...\r\nUnpacking kubeadm (1.7.5-00) ...\r\nSelecting previously unselected package ubuntu-fan.\r\nPreparing to unpack .../ubuntu-fan_0.9.2_all.deb ...\r\nUnpacking ubuntu-fan (0.9.2) ...\r\nProcessing triggers for man-db (2.7.5-1) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\nProcessing triggers for systemd (229-4ubuntu19) ...\r\nSetting up bridge-utils (1.5-9ubuntu1) ...\r\nSetting up cgroupfs-mount (1.2) ...\r\nSetting up runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...\r\nSetting up containerd (0.2.5-0ubuntu1~16.04.1) ...\r\nSetting up docker.io (1.12.6-0ubuntu1~16.04.1) ...\r\nAdding group `docker' (GID 116) ...\r\nDone.\r\nSetting up ebtables (2.0.10.4-3.4ubuntu2) ...\r\nupdate-rc.d: warning: start and stop actions are no longer supported; falling back to defaults\r\nSetting up kubernetes-cni (0.5.1-00) ...\r\nSetting up socat (1.7.3.1-1) ...\r\nSetting up kubelet (1.7.5-00) ...\r\nSetting up kubectl (1.7.5-00) ...\r\nSetting up kubeadm (1.7.5-00) ...\r\nSetting up ubuntu-fan (0.9.2) ...\r\nProcessing triggers for systemd (229-4ubuntu19) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following package was automatically installed and is no longer required:", "  grub-pc-bin", "Use 'apt autoremove' to remove it.", "The following additional packages will be installed:", "  bridge-utils cgroupfs-mount containerd ebtables runc socat ubuntu-fan", "Suggested packages:", "  mountall aufs-tools debootstrap docker-doc rinse zfs-fuse | zfsutils", "The following NEW packages will be installed:", "  bridge-utils cgroupfs-mount containerd docker.io ebtables kubeadm kubectl", "  kubelet kubernetes-cni runc socat ubuntu-fan", "0 upgraded, 12 newly installed, 0 to remove and 17 not upgraded.", "Need to get 61.8 MB of archives.", "After this operation, 417 MB of additional disk space will be used.", "Get:1 http://mirrors.digitalocean.com/ubuntu xenial/main amd64 bridge-utils amd64 1.5-9ubuntu1 [28.6 kB]", "Get:2 http://mirrors.digitalocean.com/ubuntu xenial/universe amd64 cgroupfs-mount all 1.2 [4970 B]", "Get:3 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 runc amd64 1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1 [1479 kB]", "Get:5 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 containerd amd64 0.2.5-0ubuntu1~16.04.1 [4041 kB]", "Get:9 http://mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 docker.io amd64 1.12.6-0ubuntu1~16.04.1 [10.8 MB]", "Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.5.1-00 [5560 kB]", "Get:10 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ebtables amd64 2.0.10.4-3.4ubuntu2 [79.4 kB]", "Get:11 http://mirrors.digitalocean.com/ubuntu xenial/universe amd64 socat amd64 1.7.3.1-1 [321 kB]", "Get:12 http://mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-fan all 0.9.2 [30.7 kB]", "Get:6 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.7.5-00 [19.6 MB]", "Get:7 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.7.5-00 [10.1 MB]", "Get:8 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.7.5-00 [9782 kB]", "Fetched 61.8 MB in 2s (23.3 MB/s)", "Selecting previously unselected package bridge-utils.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 54209 files and directories currently installed.)", "Preparing to unpack .../bridge-utils_1.5-9ubuntu1_amd64.deb ...", "Unpacking bridge-utils (1.5-9ubuntu1) ...", "Selecting previously unselected package cgroupfs-mount.", "Preparing to unpack .../cgroupfs-mount_1.2_all.deb ...", "Unpacking cgroupfs-mount (1.2) ...", "Selecting previously unselected package runc.", "Preparing to unpack .../runc_1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...", "Selecting previously unselected package containerd.", "Preparing to unpack .../containerd_0.2.5-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking containerd (0.2.5-0ubuntu1~16.04.1) ...", "Selecting previously unselected package docker.io.", "Preparing to unpack .../docker.io_1.12.6-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking docker.io (1.12.6-0ubuntu1~16.04.1) ...", "Selecting previously unselected package ebtables.", "Preparing to unpack .../ebtables_2.0.10.4-3.4ubuntu2_amd64.deb ...", "Unpacking ebtables (2.0.10.4-3.4ubuntu2) ...", "Selecting previously unselected package kubernetes-cni.", "Preparing to unpack .../kubernetes-cni_0.5.1-00_amd64.deb ...", "Unpacking kubernetes-cni (0.5.1-00) ...", "Selecting previously unselected package socat.", "Preparing to unpack .../socat_1.7.3.1-1_amd64.deb ...", "Unpacking socat (1.7.3.1-1) ...", "Selecting previously unselected package kubelet.", "Preparing to unpack .../kubelet_1.7.5-00_amd64.deb ...", "Unpacking kubelet (1.7.5-00) ...", "Selecting previously unselected package kubectl.", "Preparing to unpack .../kubectl_1.7.5-00_amd64.deb ...", "Unpacking kubectl (1.7.5-00) ...", "Selecting previously unselected package kubeadm.", "Preparing to unpack .../kubeadm_1.7.5-00_amd64.deb ...", "Unpacking kubeadm (1.7.5-00) ...", "Selecting previously unselected package ubuntu-fan.", "Preparing to unpack .../ubuntu-fan_0.9.2_all.deb ...", "Unpacking ubuntu-fan (0.9.2) ...", "Processing triggers for man-db (2.7.5-1) ...", "Processing triggers for ureadahead (0.100.0-19) ...", "Processing triggers for systemd (229-4ubuntu19) ...", "Setting up bridge-utils (1.5-9ubuntu1) ...", "Setting up cgroupfs-mount (1.2) ...", "Setting up runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...", "Setting up containerd (0.2.5-0ubuntu1~16.04.1) ...", "Setting up docker.io (1.12.6-0ubuntu1~16.04.1) ...", "Adding group `docker' (GID 116) ...", "Done.", "Setting up ebtables (2.0.10.4-3.4ubuntu2) ...", "update-rc.d: warning: start and stop actions are no longer supported; falling back to defaults", "Setting up kubernetes-cni (0.5.1-00) ...", "Setting up socat (1.7.3.1-1) ...", "Setting up kubelet (1.7.5-00) ...", "Setting up kubectl (1.7.5-00) ...", "Setting up kubeadm (1.7.5-00) ...", "Setting up ubuntu-fan (0.9.2) ...", "Processing triggers for systemd (229-4ubuntu19) ...", "Processing triggers for ureadahead (0.100.0-19) ..."]}
changed: [165.227.66.123] => (item=[u'kubelet', u'kubeadm', u'kubectl', u'kubernetes-cni', u'docker.io']) => {"cache_update_time": 1504460687, "cache_updated": true, "changed": true, "item": ["kubelet", "kubeadm", "kubectl", "kubernetes-cni", "docker.io"], "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following package was automatically installed and is no longer required:\n  grub-pc-bin\nUse 'apt autoremove' to remove it.\nThe following additional packages will be installed:\n  bridge-utils cgroupfs-mount containerd ebtables runc socat ubuntu-fan\nSuggested packages:\n  mountall aufs-tools debootstrap docker-doc rinse zfs-fuse | zfsutils\nThe following NEW packages will be installed:\n  bridge-utils cgroupfs-mount containerd docker.io ebtables kubeadm kubectl\n  kubelet kubernetes-cni runc socat ubuntu-fan\n0 upgraded, 12 newly installed, 0 to remove and 17 not upgraded.\nNeed to get 61.8 MB of archives.\nAfter this operation, 417 MB of additional disk space will be used.\nGet:5 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/main amd64 bridge-utils amd64 1.5-9ubuntu1 [28.6 kB]\nGet:6 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/universe amd64 cgroupfs-mount all 1.2 [4970 B]\nGet:7 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 runc amd64 1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1 [1479 kB]\nGet:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.5.1-00 [5560 kB]\nGet:8 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 containerd amd64 0.2.5-0ubuntu1~16.04.1 [4041 kB]\nGet:9 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 docker.io amd64 1.12.6-0ubuntu1~16.04.1 [10.8 MB]\nGet:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.7.5-00 [19.6 MB]\nGet:10 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ebtables amd64 2.0.10.4-3.4ubuntu2 [79.4 kB]\nGet:11 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/universe amd64 socat amd64 1.7.3.1-1 [321 kB]\nGet:12 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-fan all 0.9.2 [30.7 kB]\nGet:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.7.5-00 [10.1 MB]\nGet:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.7.5-00 [9782 kB]\nFetched 61.8 MB in 2s (30.4 MB/s)\nSelecting previously unselected package bridge-utils.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 54209 files and directories currently installed.)\r\nPreparing to unpack .../bridge-utils_1.5-9ubuntu1_amd64.deb ...\r\nUnpacking bridge-utils (1.5-9ubuntu1) ...\r\nSelecting previously unselected package cgroupfs-mount.\r\nPreparing to unpack .../cgroupfs-mount_1.2_all.deb ...\r\nUnpacking cgroupfs-mount (1.2) ...\r\nSelecting previously unselected package runc.\r\nPreparing to unpack .../runc_1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package containerd.\r\nPreparing to unpack .../containerd_0.2.5-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking containerd (0.2.5-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package docker.io.\r\nPreparing to unpack .../docker.io_1.12.6-0ubuntu1~16.04.1_amd64.deb ...\r\nUnpacking docker.io (1.12.6-0ubuntu1~16.04.1) ...\r\nSelecting previously unselected package ebtables.\r\nPreparing to unpack .../ebtables_2.0.10.4-3.4ubuntu2_amd64.deb ...\r\nUnpacking ebtables (2.0.10.4-3.4ubuntu2) ...\r\nSelecting previously unselected package kubernetes-cni.\r\nPreparing to unpack .../kubernetes-cni_0.5.1-00_amd64.deb ...\r\nUnpacking kubernetes-cni (0.5.1-00) ...\r\nSelecting previously unselected package socat.\r\nPreparing to unpack .../socat_1.7.3.1-1_amd64.deb ...\r\nUnpacking socat (1.7.3.1-1) ...\r\nSelecting previously unselected package kubelet.\r\nPreparing to unpack .../kubelet_1.7.5-00_amd64.deb ...\r\nUnpacking kubelet (1.7.5-00) ...\r\nSelecting previously unselected package kubectl.\r\nPreparing to unpack .../kubectl_1.7.5-00_amd64.deb ...\r\nUnpacking kubectl (1.7.5-00) ...\r\nSelecting previously unselected package kubeadm.\r\nPreparing to unpack .../kubeadm_1.7.5-00_amd64.deb ...\r\nUnpacking kubeadm (1.7.5-00) ...\r\nSelecting previously unselected package ubuntu-fan.\r\nPreparing to unpack .../ubuntu-fan_0.9.2_all.deb ...\r\nUnpacking ubuntu-fan (0.9.2) ...\r\nProcessing triggers for man-db (2.7.5-1) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\nProcessing triggers for systemd (229-4ubuntu19) ...\r\nSetting up bridge-utils (1.5-9ubuntu1) ...\r\nSetting up cgroupfs-mount (1.2) ...\r\nSetting up runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...\r\nSetting up containerd (0.2.5-0ubuntu1~16.04.1) ...\r\nSetting up docker.io (1.12.6-0ubuntu1~16.04.1) ...\r\nAdding group `docker' (GID 116) ...\r\nDone.\r\nSetting up ebtables (2.0.10.4-3.4ubuntu2) ...\r\nupdate-rc.d: warning: start and stop actions are no longer supported; falling back to defaults\r\nSetting up kubernetes-cni (0.5.1-00) ...\r\nSetting up socat (1.7.3.1-1) ...\r\nSetting up kubelet (1.7.5-00) ...\r\nSetting up kubectl (1.7.5-00) ...\r\nSetting up kubeadm (1.7.5-00) ...\r\nSetting up ubuntu-fan (0.9.2) ...\r\nProcessing triggers for systemd (229-4ubuntu19) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following package was automatically installed and is no longer required:", "  grub-pc-bin", "Use 'apt autoremove' to remove it.", "The following additional packages will be installed:", "  bridge-utils cgroupfs-mount containerd ebtables runc socat ubuntu-fan", "Suggested packages:", "  mountall aufs-tools debootstrap docker-doc rinse zfs-fuse | zfsutils", "The following NEW packages will be installed:", "  bridge-utils cgroupfs-mount containerd docker.io ebtables kubeadm kubectl", "  kubelet kubernetes-cni runc socat ubuntu-fan", "0 upgraded, 12 newly installed, 0 to remove and 17 not upgraded.", "Need to get 61.8 MB of archives.", "After this operation, 417 MB of additional disk space will be used.", "Get:5 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/main amd64 bridge-utils amd64 1.5-9ubuntu1 [28.6 kB]", "Get:6 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/universe amd64 cgroupfs-mount all 1.2 [4970 B]", "Get:7 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 runc amd64 1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1 [1479 kB]", "Get:1 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubernetes-cni amd64 0.5.1-00 [5560 kB]", "Get:8 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 containerd amd64 0.2.5-0ubuntu1~16.04.1 [4041 kB]", "Get:9 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/universe amd64 docker.io amd64 1.12.6-0ubuntu1~16.04.1 [10.8 MB]", "Get:2 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubelet amd64 1.7.5-00 [19.6 MB]", "Get:10 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ebtables amd64 2.0.10.4-3.4ubuntu2 [79.4 kB]", "Get:11 http://nyc2.mirrors.digitalocean.com/ubuntu xenial/universe amd64 socat amd64 1.7.3.1-1 [321 kB]", "Get:12 http://nyc2.mirrors.digitalocean.com/ubuntu xenial-updates/main amd64 ubuntu-fan all 0.9.2 [30.7 kB]", "Get:3 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubectl amd64 1.7.5-00 [10.1 MB]", "Get:4 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 kubeadm amd64 1.7.5-00 [9782 kB]", "Fetched 61.8 MB in 2s (30.4 MB/s)", "Selecting previously unselected package bridge-utils.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 54209 files and directories currently installed.)", "Preparing to unpack .../bridge-utils_1.5-9ubuntu1_amd64.deb ...", "Unpacking bridge-utils (1.5-9ubuntu1) ...", "Selecting previously unselected package cgroupfs-mount.", "Preparing to unpack .../cgroupfs-mount_1.2_all.deb ...", "Unpacking cgroupfs-mount (1.2) ...", "Selecting previously unselected package runc.", "Preparing to unpack .../runc_1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...", "Selecting previously unselected package containerd.", "Preparing to unpack .../containerd_0.2.5-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking containerd (0.2.5-0ubuntu1~16.04.1) ...", "Selecting previously unselected package docker.io.", "Preparing to unpack .../docker.io_1.12.6-0ubuntu1~16.04.1_amd64.deb ...", "Unpacking docker.io (1.12.6-0ubuntu1~16.04.1) ...", "Selecting previously unselected package ebtables.", "Preparing to unpack .../ebtables_2.0.10.4-3.4ubuntu2_amd64.deb ...", "Unpacking ebtables (2.0.10.4-3.4ubuntu2) ...", "Selecting previously unselected package kubernetes-cni.", "Preparing to unpack .../kubernetes-cni_0.5.1-00_amd64.deb ...", "Unpacking kubernetes-cni (0.5.1-00) ...", "Selecting previously unselected package socat.", "Preparing to unpack .../socat_1.7.3.1-1_amd64.deb ...", "Unpacking socat (1.7.3.1-1) ...", "Selecting previously unselected package kubelet.", "Preparing to unpack .../kubelet_1.7.5-00_amd64.deb ...", "Unpacking kubelet (1.7.5-00) ...", "Selecting previously unselected package kubectl.", "Preparing to unpack .../kubectl_1.7.5-00_amd64.deb ...", "Unpacking kubectl (1.7.5-00) ...", "Selecting previously unselected package kubeadm.", "Preparing to unpack .../kubeadm_1.7.5-00_amd64.deb ...", "Unpacking kubeadm (1.7.5-00) ...", "Selecting previously unselected package ubuntu-fan.", "Preparing to unpack .../ubuntu-fan_0.9.2_all.deb ...", "Unpacking ubuntu-fan (0.9.2) ...", "Processing triggers for man-db (2.7.5-1) ...", "Processing triggers for ureadahead (0.100.0-19) ...", "Processing triggers for systemd (229-4ubuntu19) ...", "Setting up bridge-utils (1.5-9ubuntu1) ...", "Setting up cgroupfs-mount (1.2) ...", "Setting up runc (1.0.0~rc2+docker1.12.6-0ubuntu1~16.04.1) ...", "Setting up containerd (0.2.5-0ubuntu1~16.04.1) ...", "Setting up docker.io (1.12.6-0ubuntu1~16.04.1) ...", "Adding group `docker' (GID 116) ...", "Done.", "Setting up ebtables (2.0.10.4-3.4ubuntu2) ...", "update-rc.d: warning: start and stop actions are no longer supported; falling back to defaults", "Setting up kubernetes-cni (0.5.1-00) ...", "Setting up socat (1.7.3.1-1) ...", "Setting up kubelet (1.7.5-00) ...", "Setting up kubectl (1.7.5-00) ...", "Setting up kubeadm (1.7.5-00) ...", "Setting up ubuntu-fan (0.9.2) ...", "Processing triggers for systemd (229-4ubuntu19) ...", "Processing triggers for ureadahead (0.100.0-19) ..."]}

TASK [common : Start docker] ******************************************************************************************************************
ok: [165.227.74.212] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-09-03 17:45:07 UTC", "ActiveEnterTimestampMonotonic": "231524724", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "basic.target network.target sysinit.target system.slice docker.socket systemd-journald.socket", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-09-03 17:45:06 UTC", "AssertTimestampMonotonic": "230037708", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CPUUsageNSec": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-09-03 17:45:06 UTC", "ConditionTimestampMonotonic": "230037707", "Conflicts": "shutdown.target", "ConsistsOf": "docker.socket", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "yes", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "EnvironmentFile": "/etc/default/docker (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "4085", "ExecMainStartTimestamp": "Sun 2017-09-03 17:45:06 UTC", "ExecMainStartTimestampMonotonic": "230038667", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// $DOCKER_OPTS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/lib/systemd/system/docker.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2017-09-03 17:45:06 UTC", "InactiveExitTimestampMonotonic": "230038744", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KillMode": "process", "KillSignal": "15", "LimitAS": "18446744073709551615", "LimitASSoft": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCORESoft": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitCPUSoft": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitDATASoft": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitFSIZESoft": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitLOCKSSoft": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "18446744073709551615", "LimitNOFILESoft": "18446744073709551615", "LimitNPROC": "18446744073709551615", "LimitNPROCSoft": "18446744073709551615", "LimitRSS": "18446744073709551615", "LimitRSSSoft": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "18446744073709551615", "LimitRTTIMESoft": "18446744073709551615", "LimitSIGPENDING": "3913", "LimitSIGPENDINGSoft": "3913", "LimitSTACK": "18446744073709551615", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "MainPID": "4085", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "NFileDescriptorStore": "0", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "system.slice sysinit.target docker.socket", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StateChangeTimestamp": "Sun 2017-09-03 17:45:07 UTC", "StateChangeTimestampMonotonic": "231524724", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "infinity", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogTimestamp": "Sun 2017-09-03 17:45:07 UTC", "WatchdogTimestampMonotonic": "231524722", "WatchdogUSec": "0"}}
ok: [165.227.66.123] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-09-03 17:45:10 UTC", "ActiveEnterTimestampMonotonic": "219062896", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "docker.socket sysinit.target systemd-journald.socket basic.target system.slice network.target", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-09-03 17:45:09 UTC", "AssertTimestampMonotonic": "217383741", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CPUUsageNSec": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-09-03 17:45:09 UTC", "ConditionTimestampMonotonic": "217383741", "Conflicts": "shutdown.target", "ConsistsOf": "docker.socket", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "yes", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "EnvironmentFile": "/etc/default/docker (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "4058", "ExecMainStartTimestamp": "Sun 2017-09-03 17:45:09 UTC", "ExecMainStartTimestampMonotonic": "217385359", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// $DOCKER_OPTS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/lib/systemd/system/docker.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2017-09-03 17:45:09 UTC", "InactiveExitTimestampMonotonic": "217385431", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KillMode": "process", "KillSignal": "15", "LimitAS": "18446744073709551615", "LimitASSoft": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCORESoft": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitCPUSoft": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitDATASoft": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitFSIZESoft": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitLOCKSSoft": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "18446744073709551615", "LimitNOFILESoft": "18446744073709551615", "LimitNPROC": "18446744073709551615", "LimitNPROCSoft": "18446744073709551615", "LimitRSS": "18446744073709551615", "LimitRSSSoft": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "18446744073709551615", "LimitRTTIMESoft": "18446744073709551615", "LimitSIGPENDING": "3913", "LimitSIGPENDINGSoft": "3913", "LimitSTACK": "18446744073709551615", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "MainPID": "4058", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "NFileDescriptorStore": "0", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "system.slice docker.socket sysinit.target", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StateChangeTimestamp": "Sun 2017-09-03 17:45:10 UTC", "StateChangeTimestampMonotonic": "219062896", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "infinity", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogTimestamp": "Sun 2017-09-03 17:45:10 UTC", "WatchdogTimestampMonotonic": "219062894", "WatchdogUSec": "0"}}

TASK [common : Start kubelet] *****************************************************************************************************************
ok: [165.227.74.212] => {"changed": false, "enabled": true, "name": "kubelet", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-09-03 17:45:08 UTC", "ActiveEnterTimestampMonotonic": "232587765", "ActiveExitTimestamp": "Sun 2017-09-03 17:45:09 UTC", "ActiveExitTimestampMonotonic": "233164557", "ActiveState": "activating", "After": "system.slice systemd-journald.socket sysinit.target basic.target", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-09-03 17:45:08 UTC", "AssertTimestampMonotonic": "232586858", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CPUUsageNSec": "18446744073709551615", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-09-03 17:45:08 UTC", "ConditionTimestampMonotonic": "232586858", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/kubelet.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "kubelet: The Kubernetes Node Agent", "DevicePolicy": "auto", "Documentation": "http://kubernetes.io/docs/", "DropInPaths": "/etc/systemd/system/kubelet.service.d/10-kubeadm.conf", "Environment": "KUBELET_KUBECONFIG_ARGS=--kubeconfig=/etc/kubernetes/kubelet.conf\\x20--require-kubeconfig=true KUBELET_SYSTEM_PODS_ARGS=--pod-manifest-path=/etc/kubernetes/manifests\\x20--allow-privileged=true KUBELET_NETWORK_ARGS=--network-plugin=cni\\x20--cni-conf-dir=/etc/cni/net.d\\x20--cni-bin-dir=/opt/cni/bin KUBELET_DNS_ARGS=--cluster-dns=10.96.0.10\\x20--cluster-domain=cluster.local KUBELET_AUTHZ_ARGS=--authorization-mode=Webhook\\x20--client-ca-file=/etc/kubernetes/pki/ca.crt KUBELET_CADVISOR_ARGS=--cadvisor-port=0", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sun 2017-09-03 17:45:09 UTC", "ExecMainExitTimestampMonotonic": "233164077", "ExecMainPID": "4388", "ExecMainStartTimestamp": "Sun 2017-09-03 17:45:08 UTC", "ExecMainStartTimestampMonotonic": "232587694", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/kubelet ; argv[]=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_EXTRA_ARGS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/lib/systemd/system/kubelet.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "kubelet.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sun 2017-09-03 17:45:09 UTC", "InactiveEnterTimestampMonotonic": "233164557", "InactiveExitTimestamp": "Sun 2017-09-03 17:45:09 UTC", "InactiveExitTimestampMonotonic": "233165334", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "18446744073709551615", "LimitASSoft": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCORESoft": "0", "LimitCPU": "18446744073709551615", "LimitCPUSoft": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitDATASoft": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitFSIZESoft": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitLOCKSSoft": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "4096", "LimitNOFILESoft": "1024", "LimitNPROC": "3913", "LimitNPROCSoft": "3913", "LimitRSS": "18446744073709551615", "LimitRSSSoft": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "18446744073709551615", "LimitRTTIMESoft": "18446744073709551615", "LimitSIGPENDING": "3913", "LimitSIGPENDINGSoft": "3913", "LimitSTACK": "18446744073709551615", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "MainPID": "0", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "NFileDescriptorStore": "0", "Names": "kubelet.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "system.slice sysinit.target", "Restart": "always", "RestartUSec": "10s", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "0", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StateChangeTimestamp": "Sun 2017-09-03 17:45:09 UTC", "StateChangeTimestampMonotonic": "233165334", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "auto-restart", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
ok: [165.227.66.123] => {"changed": false, "enabled": true, "name": "kubelet", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-09-03 17:45:12 UTC", "ActiveEnterTimestampMonotonic": "220461966", "ActiveExitTimestamp": "Sun 2017-09-03 17:45:12 UTC", "ActiveExitTimestampMonotonic": "221189429", "ActiveState": "activating", "After": "sysinit.target basic.target system.slice systemd-journald.socket", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-09-03 17:45:12 UTC", "AssertTimestampMonotonic": "220460851", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CPUUsageNSec": "18446744073709551615", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-09-03 17:45:12 UTC", "ConditionTimestampMonotonic": "220460851", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/kubelet.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "kubelet: The Kubernetes Node Agent", "DevicePolicy": "auto", "Documentation": "http://kubernetes.io/docs/", "DropInPaths": "/etc/systemd/system/kubelet.service.d/10-kubeadm.conf", "Environment": "KUBELET_KUBECONFIG_ARGS=--kubeconfig=/etc/kubernetes/kubelet.conf\\x20--require-kubeconfig=true KUBELET_SYSTEM_PODS_ARGS=--pod-manifest-path=/etc/kubernetes/manifests\\x20--allow-privileged=true KUBELET_NETWORK_ARGS=--network-plugin=cni\\x20--cni-conf-dir=/etc/cni/net.d\\x20--cni-bin-dir=/opt/cni/bin KUBELET_DNS_ARGS=--cluster-dns=10.96.0.10\\x20--cluster-domain=cluster.local KUBELET_AUTHZ_ARGS=--authorization-mode=Webhook\\x20--client-ca-file=/etc/kubernetes/pki/ca.crt KUBELET_CADVISOR_ARGS=--cadvisor-port=0", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sun 2017-09-03 17:45:12 UTC", "ExecMainExitTimestampMonotonic": "221188888", "ExecMainPID": "4361", "ExecMainStartTimestamp": "Sun 2017-09-03 17:45:12 UTC", "ExecMainStartTimestampMonotonic": "220461897", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/kubelet ; argv[]=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_EXTRA_ARGS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/lib/systemd/system/kubelet.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "kubelet.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sun 2017-09-03 17:45:12 UTC", "InactiveEnterTimestampMonotonic": "221189429", "InactiveExitTimestamp": "Sun 2017-09-03 17:45:12 UTC", "InactiveExitTimestampMonotonic": "221190181", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "18446744073709551615", "LimitASSoft": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCORESoft": "0", "LimitCPU": "18446744073709551615", "LimitCPUSoft": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitDATASoft": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitFSIZESoft": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitLOCKSSoft": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "4096", "LimitNOFILESoft": "1024", "LimitNPROC": "3913", "LimitNPROCSoft": "3913", "LimitRSS": "18446744073709551615", "LimitRSSSoft": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "18446744073709551615", "LimitRTTIMESoft": "18446744073709551615", "LimitSIGPENDING": "3913", "LimitSIGPENDINGSoft": "3913", "LimitSTACK": "18446744073709551615", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "MainPID": "0", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "NFileDescriptorStore": "0", "Names": "kubelet.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "system.slice sysinit.target", "Restart": "always", "RestartUSec": "10s", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "0", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StateChangeTimestamp": "Sun 2017-09-03 17:45:12 UTC", "StateChangeTimestampMonotonic": "221190181", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "auto-restart", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

PLAY [kube-master] ****************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [165.227.74.212]

TASK [master : Generate cluster token] ********************************************************************************************************
skipping: [165.227.74.212] => {"changed": false, "skip_reason": "Conditional result was False", "skipped": true}

TASK [master : set_fact] **********************************************************************************************************************
skipping: [165.227.74.212] => {"changed": false, "skip_reason": "Conditional result was False", "skipped": true}

TASK [master : Initialize kubernetes] *********************************************************************************************************
changed: [165.227.74.212] => {"changed": true, "cmd": "/usr/bin/kubeadm init --token secret.token4yourbyok8s --kubernetes-version v1.7.4 --pod-network-cidr=10.244.0.0/16", "delta": "0:01:51.487586", "end": "2017-09-03 17:47:11.373881", "rc": 0, "start": "2017-09-03 17:45:19.886295", "stderr": "", "stderr_lines": [], "stdout": "[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.\n[init] Using Kubernetes version: v1.7.4\n[init] Using Authorization modes: [Node RBAC]\n[preflight] Running pre-flight checks\n[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)\n[certificates] Generated CA certificate and key.\n[certificates] Generated API server certificate and key.\n[certificates] API Server serving cert is signed for DNS names [master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 165.227.74.212]\n[certificates] Generated API server kubelet client certificate and key.\n[certificates] Generated service account token signing key and public key.\n[certificates] Generated front-proxy CA certificate and key.\n[certificates] Generated front-proxy client certificate and key.\n[certificates] Valid certificates and keys now exist in \"/etc/kubernetes/pki\"\n[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/admin.conf\"\n[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/kubelet.conf\"\n[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/controller-manager.conf\"\n[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/scheduler.conf\"\n[apiclient] Created API client, waiting for the control plane to become ready\n[apiclient] All control plane components are healthy after 104.505008 seconds\n[token] Using token: secret.token4yourbyok8s\n[apiconfig] Created RBAC rules\n[addons] Applied essential addon: kube-proxy\n[addons] Applied essential addon: kube-dns\n\nYour Kubernetes master has initialized successfully!\n\nTo start using your cluster, you need to run (as a regular user):\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  http://kubernetes.io/docs/admin/addons/\n\nYou can now join any number of machines by running the following on each node\nas root:\n\n  kubeadm join --token secret.token4yourbyok8s 165.227.74.212:6443", "stdout_lines": ["[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.", "[init] Using Kubernetes version: v1.7.4", "[init] Using Authorization modes: [Node RBAC]", "[preflight] Running pre-flight checks", "[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)", "[certificates] Generated CA certificate and key.", "[certificates] Generated API server certificate and key.", "[certificates] API Server serving cert is signed for DNS names [master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 165.227.74.212]", "[certificates] Generated API server kubelet client certificate and key.", "[certificates] Generated service account token signing key and public key.", "[certificates] Generated front-proxy CA certificate and key.", "[certificates] Generated front-proxy client certificate and key.", "[certificates] Valid certificates and keys now exist in \"/etc/kubernetes/pki\"", "[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/admin.conf\"", "[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/kubelet.conf\"", "[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/controller-manager.conf\"", "[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/scheduler.conf\"", "[apiclient] Created API client, waiting for the control plane to become ready", "[apiclient] All control plane components are healthy after 104.505008 seconds", "[token] Using token: secret.token4yourbyok8s", "[apiconfig] Created RBAC rules", "[addons] Applied essential addon: kube-proxy", "[addons] Applied essential addon: kube-dns", "", "Your Kubernetes master has initialized successfully!", "", "To start using your cluster, you need to run (as a regular user):", "", "  mkdir -p $HOME/.kube", "  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config", "  sudo chown $(id -u):$(id -g) $HOME/.kube/config", "", "You should now deploy a pod network to the cluster.", "Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:", "  http://kubernetes.io/docs/admin/addons/", "", "You can now join any number of machines by running the following on each node", "as root:", "", "  kubeadm join --token secret.token4yourbyok8s 165.227.74.212:6443"]}

TASK [master : Wait for images pulling and service to start] **********************************************************************************
Pausing for 10 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [165.227.74.212] => {"changed": false, "delta": 10, "rc": 0, "start": "2017-09-03 13:47:11.662274", "stderr": "", "stdout": "Paused for 10.0 seconds", "stop": "2017-09-03 13:47:21.663552", "user_input": ""}

TASK [master : Wait for images pulling and service to start] **********************************************************************************
Pausing for 10 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [165.227.74.212] => {"changed": false, "delta": 10, "rc": 0, "start": "2017-09-03 13:47:21.697879", "stderr": "", "stdout": "Paused for 10.0 seconds", "stop": "2017-09-03 13:47:31.698546", "user_input": ""}

TASK [master : sanity check for pods] *********************************************************************************************************
FAILED - RETRYING: sanity check for pods (20 retries left).
changed: [165.227.74.212] => {"attempts": 2, "changed": true, "cmd": "/usr/bin/kubectl get --namespace kube-system pods | tail -n +2 | grep -v -w 'Running' | grep -v 'kube-dns' || true", "delta": "0:00:00.399120", "end": "2017-09-03 17:47:37.854959", "rc": 0, "start": "2017-09-03 17:47:37.455839", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [master : copy flannel files] ************************************************************************************************************
changed: [165.227.74.212] => (item=kube-flannel.yml) => {"changed": true, "checksum": "1a4c50d7eab6d52b08c4ce563b9eb1ab204c4d6d", "dest": "/tmp/kube-flannel.yml", "gid": 0, "group": "root", "item": "kube-flannel.yml", "md5sum": "ef9d791d33d2bda855a05b31cd6e4e00", "mode": "0644", "owner": "root", "size": 2175, "src": "/root/.ansible/tmp/ansible-tmp-1504460858.74-7413400441652/source", "state": "file", "uid": 0}
changed: [165.227.74.212] => (item=kube-flannel-rbac.yml) => {"changed": true, "checksum": "c1b7e255b0cbd557851b044a5e590a5422debaaf", "dest": "/tmp/kube-flannel-rbac.yml", "gid": 0, "group": "root", "item": "kube-flannel-rbac.yml", "md5sum": "156dd9fa7b6687cfd2b5feaf2628612c", "mode": "0644", "owner": "root", "size": 849, "src": "/root/.ansible/tmp/ansible-tmp-1504460860.28-227393412813041/source", "state": "file", "uid": 0}

TASK [master : apply flannel network plugin] **************************************************************************************************
changed: [165.227.74.212] => (item=kube-flannel.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "apply", "-f", "/tmp/kube-flannel.yml"], "delta": "0:00:00.686451", "end": "2017-09-03 17:47:42.519033", "item": "kube-flannel.yml", "rc": 0, "start": "2017-09-03 17:47:41.832582", "stderr": "", "stderr_lines": [], "stdout": "serviceaccount \"flannel\" created\nconfigmap \"kube-flannel-cfg\" created\ndaemonset \"kube-flannel-ds\" created", "stdout_lines": ["serviceaccount \"flannel\" created", "configmap \"kube-flannel-cfg\" created", "daemonset \"kube-flannel-ds\" created"]}
changed: [165.227.74.212] => (item=kube-flannel-rbac.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "apply", "-f", "/tmp/kube-flannel-rbac.yml"], "delta": "0:00:00.337814", "end": "2017-09-03 17:47:43.801699", "item": "kube-flannel-rbac.yml", "rc": 0, "start": "2017-09-03 17:47:43.463885", "stderr": "", "stderr_lines": [], "stdout": "clusterrole \"flannel\" created\nclusterrolebinding \"flannel\" created", "stdout_lines": ["clusterrole \"flannel\" created", "clusterrolebinding \"flannel\" created"]}

PLAY [kube-node] ******************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [165.227.66.123]

TASK [node : set_fact] ************************************************************************************************************************
skipping: [165.227.66.123] => {"changed": false, "skip_reason": "Conditional result was False", "skipped": true}

TASK [node : Join cluster] ********************************************************************************************************************
changed: [165.227.66.123] => {"changed": true, "cmd": "/usr/bin/kubeadm join 165.227.74.212:6443 --token secret.token4yourbyok8s", "delta": "0:00:00.731323", "end": "2017-09-03 17:47:47.281773", "rc": 0, "start": "2017-09-03 17:47:46.550450", "stderr": "", "stderr_lines": [], "stdout": "[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.\n[preflight] Running pre-flight checks\n[discovery] Trying to connect to API Server \"165.227.74.212:6443\"\n[discovery] Created cluster-info discovery client, requesting info from \"https://165.227.74.212:6443\"\n[discovery] Cluster info signature and contents are valid, will use API Server \"https://165.227.74.212:6443\"\n[discovery] Successfully established connection with API Server \"165.227.74.212:6443\"\n[bootstrap] Detected server version: v1.7.4\n[bootstrap] The server supports the Certificates API (certificates.k8s.io/v1beta1)\n[csr] Created API client to obtain unique certificate for this node, generating keys and certificate signing request\n[csr] Received signed certificate from the API server, generating KubeConfig...\n[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/kubelet.conf\"\n\nNode join complete:\n* Certificate signing request sent to master and response\n  received.\n* Kubelet informed of new secure connection details.\n\nRun 'kubectl get nodes' on the master to see this machine join.", "stdout_lines": ["[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.", "[preflight] Running pre-flight checks", "[discovery] Trying to connect to API Server \"165.227.74.212:6443\"", "[discovery] Created cluster-info discovery client, requesting info from \"https://165.227.74.212:6443\"", "[discovery] Cluster info signature and contents are valid, will use API Server \"https://165.227.74.212:6443\"", "[discovery] Successfully established connection with API Server \"165.227.74.212:6443\"", "[bootstrap] Detected server version: v1.7.4", "[bootstrap] The server supports the Certificates API (certificates.k8s.io/v1beta1)", "[csr] Created API client to obtain unique certificate for this node, generating keys and certificate signing request", "[csr] Received signed certificate from the API server, generating KubeConfig...", "[kubeconfig] Wrote KubeConfig file to disk: \"/etc/kubernetes/kubelet.conf\"", "", "Node join complete:", "* Certificate signing request sent to master and response", "  received.", "* Kubelet informed of new secure connection details.", "", "Run 'kubectl get nodes' on the master to see this machine join."]}

PLAY [all] ************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [165.227.66.123]
ok: [165.227.74.212]

TASK [app : copy app yml files] ***************************************************************************************************************
changed: [165.227.74.212] => (item=deployment.yml) => {"changed": true, "checksum": "f9629edc74f6a4d2c908d9d58c5c0b23ff69bd0f", "dest": "/tmp/deployment.yml", "gid": 0, "group": "root", "item": "deployment.yml", "md5sum": "d0c25c2a8de48ef5e9f70770d2a8b757", "mode": "0644", "owner": "root", "size": 406, "src": "/root/.ansible/tmp/ansible-tmp-1504460869.39-204966188212033/source", "state": "file", "uid": 0}
changed: [165.227.66.123] => (item=deployment.yml) => {"changed": true, "checksum": "f9629edc74f6a4d2c908d9d58c5c0b23ff69bd0f", "dest": "/tmp/deployment.yml", "gid": 0, "group": "root", "item": "deployment.yml", "md5sum": "d0c25c2a8de48ef5e9f70770d2a8b757", "mode": "0644", "owner": "root", "size": 406, "src": "/root/.ansible/tmp/ansible-tmp-1504460869.47-197540837925068/source", "state": "file", "uid": 0}
changed: [165.227.74.212] => (item=service.yml) => {"changed": true, "checksum": "f518753ddc065d87cb3311eb12d5491c86b0840c", "dest": "/tmp/service.yml", "gid": 0, "group": "root", "item": "service.yml", "md5sum": "e9b1422672d3d088ffc559a29e441f7b", "mode": "0644", "owner": "root", "size": 263, "src": "/root/.ansible/tmp/ansible-tmp-1504460870.77-275488414315558/source", "state": "file", "uid": 0}
changed: [165.227.66.123] => (item=service.yml) => {"changed": true, "checksum": "f518753ddc065d87cb3311eb12d5491c86b0840c", "dest": "/tmp/service.yml", "gid": 0, "group": "root", "item": "service.yml", "md5sum": "e9b1422672d3d088ffc559a29e441f7b", "mode": "0644", "owner": "root", "size": 263, "src": "/root/.ansible/tmp/ansible-tmp-1504460871.62-18577871133869/source", "state": "file", "uid": 0}

TASK [app : bring up application] *************************************************************************************************************
failed: [165.227.66.123] (item=deployment.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "--kubeconfig=/etc/kubernetes/admin.conf", "create", "-f", "/tmp/deployment.yml"], "delta": "0:00:00.295908", "end": "2017-09-03 17:47:53.880571", "failed": true, "item": "deployment.yml", "rc": 1, "start": "2017-09-03 17:47:53.584663", "stderr": "error: stat /etc/kubernetes/admin.conf: no such file or directory", "stderr_lines": ["error: stat /etc/kubernetes/admin.conf: no such file or directory"], "stdout": "", "stdout_lines": []}
changed: [165.227.74.212] => (item=deployment.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "--kubeconfig=/etc/kubernetes/admin.conf", "create", "-f", "/tmp/deployment.yml"], "delta": "0:00:00.444896", "end": "2017-09-03 17:47:54.018179", "item": "deployment.yml", "rc": 0, "start": "2017-09-03 17:47:53.573283", "stderr": "", "stderr_lines": [], "stdout": "replicationcontroller \"flasktest\" created", "stdout_lines": ["replicationcontroller \"flasktest\" created"]}
failed: [165.227.66.123] (item=service.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "--kubeconfig=/etc/kubernetes/admin.conf", "create", "-f", "/tmp/service.yml"], "delta": "0:00:00.343984", "end": "2017-09-03 17:47:55.127530", "failed": true, "item": "service.yml", "rc": 1, "start": "2017-09-03 17:47:54.783546", "stderr": "error: stat /etc/kubernetes/admin.conf: no such file or directory", "stderr_lines": ["error: stat /etc/kubernetes/admin.conf: no such file or directory"], "stdout": "", "stdout_lines": []}
changed: [165.227.74.212] => (item=service.yml) => {"changed": true, "cmd": ["/usr/bin/kubectl", "--kubeconfig=/etc/kubernetes/admin.conf", "create", "-f", "/tmp/service.yml"], "delta": "0:00:00.408201", "end": "2017-09-03 17:47:55.177895", "item": "service.yml", "rc": 0, "start": "2017-09-03 17:47:54.769694", "stderr": "", "stderr_lines": [], "stdout": "service \"flasktest\" created", "stdout_lines": ["service \"flasktest\" created"]}
	to retry, use: --limit @/Users/hsutsungchun/ansible-kubeadm/site.retry

PLAY RECAP ************************************************************************************************************************************
165.227.66.123             : ok=15   changed=8    unreachable=0    failed=1   
165.227.74.212             : ok=21   changed=12   unreachable=0    failed=0   

