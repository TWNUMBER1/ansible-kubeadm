Using /Users/hsutsungchun/ansible-kubeadm/ansible.cfg as config file

PLAY [all] ************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************
ok: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com]
ok: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com]

TASK [reset : Reset cluster] ******************************************************************************************************************
fatal: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com]: FAILED! => {"changed": true, "cmd": "/usr/bin/kubeadm reset", "delta": "0:00:00.001514", "end": "2017-09-03 16:09:52.793478", "failed": true, "rc": 127, "start": "2017-09-03 16:09:52.791964", "stderr": "/bin/sh: 1: /usr/bin/kubeadm: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/kubeadm: not found"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com]: FAILED! => {"changed": true, "cmd": "/usr/bin/kubeadm reset", "delta": "0:00:00.002002", "end": "2017-09-03 16:09:52.824883", "failed": true, "rc": 127, "start": "2017-09-03 16:09:52.822881", "stderr": "/bin/sh: 1: /usr/bin/kubeadm: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/kubeadm: not found"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [reset : systemctl stop kubelet] *********************************************************************************************************
changed: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com] => {"changed": true, "cmd": "for i in $(/usr/bin/systemctl list-unit-files --no-legend --no-pager -l | grep --color=never -o *.*.slice | grep kubepod); do echo $i; systemctl stop $i; done", "delta": "0:00:00.003296", "end": "2017-09-03 16:09:53.788468", "rc": 0, "start": "2017-09-03 16:09:53.785172", "stderr": "/bin/sh: 1: /usr/bin/systemctl: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/systemctl: not found"], "stdout": "", "stdout_lines": []}
changed: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com] => {"changed": true, "cmd": "for i in $(/usr/bin/systemctl list-unit-files --no-legend --no-pager -l | grep --color=never -o *.*.slice | grep kubepod); do echo $i; systemctl stop $i; done", "delta": "0:00:00.003851", "end": "2017-09-03 16:09:53.805041", "rc": 0, "start": "2017-09-03 16:09:53.801190", "stderr": "/bin/sh: 1: /usr/bin/systemctl: not found", "stderr_lines": ["/bin/sh: 1: /usr/bin/systemctl: not found"], "stdout": "", "stdout_lines": []}

TASK [reset : remove pacakges] ****************************************************************************************************************
ok: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com] => (item=kubelet) => {"changed": false, "item": "kubelet"}
ok: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com] => (item=kubelet) => {"changed": false, "item": "kubelet"}
ok: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com] => (item=kubectl) => {"changed": false, "item": "kubectl"}
ok: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com] => (item=kubectl) => {"changed": false, "item": "kubectl"}
ok: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com] => (item=kubeadm) => {"changed": false, "item": "kubeadm"}
ok: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com] => (item=kubeadm) => {"changed": false, "item": "kubeadm"}
ok: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com] => (item=kubernetes-cni) => {"changed": false, "item": "kubernetes-cni"}
ok: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com] => (item=kubernetes-cni) => {"changed": false, "item": "kubernetes-cni"}

TASK [reset : cni0 IP allocation issue] *******************************************************************************************************
 [WARNING]: Consider using file module with state=absent rather than running rm
fatal: [ec2-13-58-13-217.us-east-2.compute.amazonaws.com]: FAILED! => {"changed": true, "cmd": "rm -rf /var/lib/cni/ /var/lib/kubelet/* /etc/cni/ /run/flannel ; ifconfig cni0 down; ifconfig flannel.1 down;", "delta": "0:00:00.006452", "end": "2017-09-03 16:10:00.698861", "failed": true, "rc": 255, "start": "2017-09-03 16:10:00.692409", "stderr": "rm: cannot remove '/var/lib/kubelet/pods/0d12b6e4-90c2-11e7-a9f3-02b77b377326/volumes/kubernetes.io~secret/kube-proxy-token-f7hp7': Device or resource busy\ncni0: ERROR while getting interface flags: No such device\nflannel.1: ERROR while getting interface flags: No such device", "stderr_lines": ["rm: cannot remove '/var/lib/kubelet/pods/0d12b6e4-90c2-11e7-a9f3-02b77b377326/volumes/kubernetes.io~secret/kube-proxy-token-f7hp7': Device or resource busy", "cni0: ERROR while getting interface flags: No such device", "flannel.1: ERROR while getting interface flags: No such device"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [ec2-18-220-174-41.us-east-2.compute.amazonaws.com]: FAILED! => {"changed": true, "cmd": "rm -rf /var/lib/cni/ /var/lib/kubelet/* /etc/cni/ /run/flannel ; ifconfig cni0 down; ifconfig flannel.1 down;", "delta": "0:00:00.005396", "end": "2017-09-03 16:10:00.717393", "failed": true, "rc": 255, "start": "2017-09-03 16:10:00.711997", "stderr": "cni0: ERROR while getting interface flags: No such device\nflannel.1: ERROR while getting interface flags: No such device", "stderr_lines": ["cni0: ERROR while getting interface flags: No such device", "flannel.1: ERROR while getting interface flags: No such device"], "stdout": "", "stdout_lines": []}
...ignoring

PLAY RECAP ************************************************************************************************************************************
ec2-13-58-13-217.us-east-2.compute.amazonaws.com : ok=5    changed=3    unreachable=0    failed=0   
ec2-18-220-174-41.us-east-2.compute.amazonaws.com : ok=5    changed=3    unreachable=0    failed=0   

